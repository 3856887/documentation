$line-numbers-width: 1rem;

.content {
    code {
        @apply m-0 text-sm bg-grey-lighter rounded-sm;
        padding: .2rem;
    }

    pre, pre[class*="language-"] {
        @apply leading-tight overflow-auto my-4 mx-0 p-4;

        code {
            @apply text-white p-0 bg-transparent;
        }
    }
}

div[class*="language-"] {
    @apply relative bg-grey-darkest;

    .highlight-lines {
        @apply absolute pin-t pin-l w-full leading-tight;
        user-select: none;
        margin-top: 1.15rem;

        .highlighted {
            @apply bg-grey-darker;
        }
    }

    pre, pre[class*="language-"] {
        @apply bg-transparent relative;
        z-index: 1;
    }

    &::before {
        @apply absolute text-xs text-grey;
        top: 1em;
        right: 1em;
    }

    &:not(.line-numbers-mode) {
        .line-numbers-wrapper {
            @apply hidden;
        }
    }
    &.line-numbers-mode {
        .highlight-lines .highlighted {
            @apply relative;

            &:before {
                @apply absolute pin-l pin-t block h-full;
                content: ' ';
                width: $line-numbers-width;
            }
        }

        pre {
            @apply align-middle;
            width: $line-numbers-width;
        }

        .line-numbers-wrapper {
            @apply absolute pin-t text-center;
            width: $line-numbers-width;

            br {
                user-select: none;
            }

            .line-number {
                @apply relative;
                user-select: none;
            }
        }
        &::after {
            @apply absolute pin-t pin-l h-full;
            content: '';
            width: $line-numbers-width;
        }
    }
}

/* language hints */

@each $lang in js,ts,html,md,vue,css,sass,scss,less,stylus,go,java,c,sh,yaml,conf {
    div[class~="language-#{$lang}"]:before {
        content: '#{$lang}';
    }
}

div[class~="language-javascript"]:before {
    content: "js";
}
div[class~="language-typescript"]:before {
    content: "ts";
}
div[class~="language-markup"]:before {
    content: "html";
}
div[class~="language-markdown"]:before {
    content: "md";
}
div[class~="language-json"]:before {
    content: "json";
}
div[class~="language-ruby"]:before {
    content: "rb";
}
div[class~="language-python"]:before {
    content: "py";
}
div[class~="language-bash"]:before {
    content: "sh";
}