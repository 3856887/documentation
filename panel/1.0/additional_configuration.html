<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>其他配置 | Pterodactyl-China</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#0e4688">
    <link rel="manifest" href="/favicons/site.webmanifest">
    <link rel="shortcut icon" href="/favicons/favicon.ico">
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-KWVNS6PXK2"></script>
    <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KWVNS6PXK2');
        </script>
    <meta name="description" content="翼龙是一个使用 PHP、React 和 Go 构建的开源游戏服务器管理面板。翼龙在设计时考虑了安全性，在隔离的 Docker 镜像中运行所有游戏服务器，同时向最终用户展示了美观直观的 UI。">
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    <meta name="theme-color" content="#0e4688">
    <meta name="keywords" content="翼龙,翼龙面板,面板汉化,汉化,中文,中文汉化,面板,翼龙汉化,翼龙中国,翼手龙,汉化版,pterodactyl-china,china,pterodactyl,教程,翼龙最新版,翼龙官网,翼龙中国官网,官网">
    
    <link rel="preload" href="/assets/css/0.styles.b3d0dfa6.css" as="style"><link rel="preload" href="/assets/js/app.2074c500.js" as="script"><link rel="preload" href="/assets/js/4.6551f5ab.js" as="script"><link rel="preload" href="/assets/js/1.c40e2759.js" as="script"><link rel="preload" href="/assets/js/67.d2fd355f.js" as="script"><link rel="prefetch" href="/assets/js/10.cdd4a61d.js"><link rel="prefetch" href="/assets/js/11.039f5a1e.js"><link rel="prefetch" href="/assets/js/12.c36cd281.js"><link rel="prefetch" href="/assets/js/13.be3e351e.js"><link rel="prefetch" href="/assets/js/14.89240601.js"><link rel="prefetch" href="/assets/js/15.886ee232.js"><link rel="prefetch" href="/assets/js/16.0f854349.js"><link rel="prefetch" href="/assets/js/17.c4a3a47e.js"><link rel="prefetch" href="/assets/js/18.5b882098.js"><link rel="prefetch" href="/assets/js/19.6745f1bd.js"><link rel="prefetch" href="/assets/js/2.1c4292ed.js"><link rel="prefetch" href="/assets/js/20.e17c3213.js"><link rel="prefetch" href="/assets/js/21.382e4b10.js"><link rel="prefetch" href="/assets/js/22.c4019a61.js"><link rel="prefetch" href="/assets/js/23.0c8d5507.js"><link rel="prefetch" href="/assets/js/24.ccf823b2.js"><link rel="prefetch" href="/assets/js/25.4ffa29c9.js"><link rel="prefetch" href="/assets/js/26.4bacbf8e.js"><link rel="prefetch" href="/assets/js/27.691f8514.js"><link rel="prefetch" href="/assets/js/28.82f3dcaf.js"><link rel="prefetch" href="/assets/js/29.5957e555.js"><link rel="prefetch" href="/assets/js/30.d02b665a.js"><link rel="prefetch" href="/assets/js/31.c3ea05c4.js"><link rel="prefetch" href="/assets/js/32.163a20cb.js"><link rel="prefetch" href="/assets/js/33.eb78adde.js"><link rel="prefetch" href="/assets/js/34.c982b1fd.js"><link rel="prefetch" href="/assets/js/35.7b9bc9bc.js"><link rel="prefetch" href="/assets/js/36.75781918.js"><link rel="prefetch" href="/assets/js/37.12f871cd.js"><link rel="prefetch" href="/assets/js/38.5457d8b9.js"><link rel="prefetch" href="/assets/js/39.8c97e6e3.js"><link rel="prefetch" href="/assets/js/40.bd587b22.js"><link rel="prefetch" href="/assets/js/41.4d484344.js"><link rel="prefetch" href="/assets/js/42.c8821eaf.js"><link rel="prefetch" href="/assets/js/43.b35ab0c3.js"><link rel="prefetch" href="/assets/js/44.86e03bcf.js"><link rel="prefetch" href="/assets/js/45.d8bfcca8.js"><link rel="prefetch" href="/assets/js/46.3921dc67.js"><link rel="prefetch" href="/assets/js/47.3b201087.js"><link rel="prefetch" href="/assets/js/48.09af47c9.js"><link rel="prefetch" href="/assets/js/49.9fc6f116.js"><link rel="prefetch" href="/assets/js/5.808a266f.js"><link rel="prefetch" href="/assets/js/50.97dc238c.js"><link rel="prefetch" href="/assets/js/51.8f120aea.js"><link rel="prefetch" href="/assets/js/52.99228419.js"><link rel="prefetch" href="/assets/js/53.e5cf98c2.js"><link rel="prefetch" href="/assets/js/54.3590d92e.js"><link rel="prefetch" href="/assets/js/55.07ad4bbb.js"><link rel="prefetch" href="/assets/js/56.123eb4cf.js"><link rel="prefetch" href="/assets/js/57.d31ed450.js"><link rel="prefetch" href="/assets/js/58.afc6bab2.js"><link rel="prefetch" href="/assets/js/59.4c3233ae.js"><link rel="prefetch" href="/assets/js/6.4297e35e.js"><link rel="prefetch" href="/assets/js/60.b56c8372.js"><link rel="prefetch" href="/assets/js/61.033d3ce8.js"><link rel="prefetch" href="/assets/js/62.a055c3af.js"><link rel="prefetch" href="/assets/js/63.b21b6d2e.js"><link rel="prefetch" href="/assets/js/64.eda6469c.js"><link rel="prefetch" href="/assets/js/65.8d00877d.js"><link rel="prefetch" href="/assets/js/66.803b4841.js"><link rel="prefetch" href="/assets/js/68.4763ba44.js"><link rel="prefetch" href="/assets/js/69.55c45e91.js"><link rel="prefetch" href="/assets/js/7.396b95f8.js"><link rel="prefetch" href="/assets/js/70.ab12d200.js"><link rel="prefetch" href="/assets/js/71.cc10f7a6.js"><link rel="prefetch" href="/assets/js/72.00e5ec0f.js"><link rel="prefetch" href="/assets/js/73.5c560707.js"><link rel="prefetch" href="/assets/js/74.a323b5cb.js"><link rel="prefetch" href="/assets/js/75.6245917d.js"><link rel="prefetch" href="/assets/js/76.1102f327.js"><link rel="prefetch" href="/assets/js/77.5d8fd610.js"><link rel="prefetch" href="/assets/js/78.f3da74ad.js"><link rel="prefetch" href="/assets/js/79.29412aa5.js"><link rel="prefetch" href="/assets/js/8.8d925af0.js"><link rel="prefetch" href="/assets/js/9.49432b78.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b3d0dfa6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="fixed h-12 w-full z-50 top-0"><div class="h-12 w-full bg-black flex items-center justify-center px-4"><p class="text-grey-lightest font-semibold">
        欢迎支持 翼龙中国 CN 
        <a href="https://github.com/pterodactyl-china/documentation" target="_blank" rel="noindex nofollow noopener" class="text-blue-lighter">现在就支持</a></p></div></div> <div class="theme-container mt-12"><header class="nav"><div class="sidebar-button block md:hidden flex-no-shrink"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <div class="logo-container"><a href="/" class="home-link router-link-active"><img src="/logos/pterry.svg" class="logo"> <span class="site-name hidden md:inline can-hide">Pterodactyl-China</span></a></div> <div class="w-full"><div class="flex"><div class="search-box"><input aria-label="搜索" placeholder="搜索" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links flex-no-shrink hidden md:flex"><div class="nav-item"><a href="/project/introduction.html" class="nav-link">文档
</a></div><div class="nav-item"><a href="/community/about.html" class="nav-link">社区指南
</a></div><div class="nav-item"><a href="https://kook.top/0Grsf5" target="_blank" rel="noopener noreferrer" class="nav-link external">
    获取帮助
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://dashflo.net/docs/api/pterodactyl/v1/" target="_blank" rel="noopener noreferrer" class="nav-link external">
    API
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <div class="nav-item"><a href="https://github.com/pterodactyl-china/panel" target="_blank" rel="noopener noreferrer" class="nav-link">
            GitHub
            <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links flex-no-shrink block md:hidden"><div class="nav-item"><a href="/project/introduction.html" class="nav-link">文档
</a></div><div class="nav-item"><a href="/community/about.html" class="nav-link">社区指南
</a></div><div class="nav-item"><a href="https://kook.top/0Grsf5" target="_blank" rel="noopener noreferrer" class="nav-link external">
    获取帮助
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://dashflo.net/docs/api/pterodactyl/v1/" target="_blank" rel="noopener noreferrer" class="nav-link external">
    API
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <div class="nav-item"><a href="https://github.com/pterodactyl-china/panel" target="_blank" rel="noopener noreferrer" class="nav-link">
            GitHub
            <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>项目信息</span> <!----> <!----></p> <ul class="sidebar-group-items"><li><a href="/project/introduction.html" class="sidebar-link">介绍</a></li><li><a href="/project/about.html" class="sidebar-link">关于</a></li><li><a href="/project/terms.html" class="sidebar-link">术语</a></li><li><a href="/project/community.html" class="sidebar-link">Community Standards</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>面板 (前端)</span> <!----> <div tabindex="0" class="version-select custom-select float-right"><div class="selected"><div class="inline-block">
  1.10
  <span class="rounded-full ml-2 text-green-dark">current</span></div> <span class="arrow"></span></div> <div class="items hidden"><div class="item"><div class="inline-block">
  1.10
  <span class="rounded-full ml-2 text-green-dark">current</span></div></div></div></div></p> <ul class="sidebar-group-items"><li><a href="/panel/1.0/getting_started.html" class="sidebar-link">开始入门</a></li><li><a href="/panel/1.0/btpanel_getstarted.html" class="sidebar-link">使用宝塔（BT-Panel）面板搭建</a></li><li><a href="/panel/1.0/webserver_configuration.html" class="sidebar-link">网络服务器配置</a></li><li><a href="/panel/1.0/additional_configuration.html" aria-current="page" class="active sidebar-link">其他配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/panel/1.0/additional_configuration.html#备份" class="sidebar-link">备份</a></li><li class="sidebar-sub-header"><a href="/panel/1.0/additional_configuration.html#反向代理设置" class="sidebar-link">反向代理设置</a></li><li class="sidebar-sub-header"><a href="/panel/1.0/additional_configuration.html#recaptcha" class="sidebar-link">reCAPTCHA</a></li><li class="sidebar-sub-header"><a href="/panel/1.0/additional_configuration.html#动态口令认证" class="sidebar-link">动态口令认证</a></li></ul></li><li><a href="/panel/1.0/updating.html" class="sidebar-link">更新面板</a></li><li><a href="/panel/1.0/troubleshooting.html" class="sidebar-link">疑难解答</a></li><li><a href="/panel/1.0/legacy_upgrade.html" class="sidebar-link">旧版升级</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Wings (后端)</span> <!----> <div tabindex="0" class="version-select custom-select float-right"><div class="selected"><div class="inline-block">
  1.7
  <span class="rounded-full ml-2 text-green-dark">current</span></div> <span class="arrow"></span></div> <div class="items hidden"><div class="item"><div class="inline-block">
  1.7
  <span class="rounded-full ml-2 text-green-dark">current</span></div></div></div></div></p> <ul class="sidebar-group-items"><li><a href="/wings/1.0/installing.html" class="sidebar-link">安装 Wings</a></li><li><a href="/wings/1.0/upgrading.html" class="sidebar-link">升级 Wings</a></li><li><a href="/wings/1.0/migrating.html" class="sidebar-link">迁移至 Wings</a></li><li><a href="/wings/1.0/configuration.html" class="sidebar-link">额外配置</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>教程</span> <!----> <!----></p> <ul class="sidebar-group-items"><li><a href="/tutorials/mysql_setup.html" class="sidebar-link">配置 MySQL</a></li><li><a href="/tutorials/creating_ssl_certificates.html" class="sidebar-link">创建 SSL 证书</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>指南</span> <!----> <!----></p> <ul class="sidebar-group-items"><li><a href="/guides/mounts.html" class="sidebar-link">使用挂载</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>开发与运营</span> <span class="arrow right"></span> <!----></p> <!----></div></li></ul> </div> <div class="page"> <div class="content content__default"><h1 id="其他配置"><a href="#其他配置" class="header-anchor">#</a> 其他配置</h1> <p></p><div class="table-of-contents"><ul><li><a href="#备份">备份</a><ul><li><a href="#使用本地备份">使用本地备份</a></li><li><a href="#使用-s3-备份">使用 S3 备份</a></li></ul></li><li><a href="#反向代理设置">反向代理设置</a><ul><li><a href="#nginx-特定配置">NGINX 特定配置</a></li><li><a href="#cloudflare-特定配置">Cloudflare 特定配置</a></li></ul></li><li><a href="#recaptcha">reCAPTCHA</a><ul><li><a href="#配置-recaptcha">配置 reCAPTCHA</a></li><li><a href="#禁用-recaptcha">禁用 reCAPTCHA</a></li></ul></li><li><a href="#动态口令认证">动态口令认证</a><ul><li><a href="#禁用动态口令认证">禁用动态口令认证</a></li><li><a href="#为特定用户禁用动态口令认证">为特定用户禁用动态口令认证</a></li></ul></li></ul></div><p></p> <h2 id="备份"><a href="#备份" class="header-anchor">#</a> 备份</h2> <p>翼龙面板允许用户为其服务器创建备份。为了创建备份，必须配置一个备份存储方法。</p> <p>当改变翼龙面板的备份存储方式时，用户仍然可以从以前的存储驱动下载或删除现有的备份。
在从S3迁移到本地备份的例子中，切换到本地备份存储方式后，S3凭证必须保持配置。</p> <h3 id="使用本地备份"><a href="#使用本地备份" class="header-anchor">#</a> 使用本地备份</h3> <p>默认情况下，翼龙面板通过 Wings (后端) 使用本地存储进行备份。也就是说，这种备份存储方式可以在 <code>.env</code> 文件中通过以下配置明确设置。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 将你的面板设置为通过 Wings 使用本地存储进行备份</span>
<span class="token assign-left variable">APP_BACKUP_DRIVER</span><span class="token operator">=</span>wings
</code></pre></div><p>请注意，当通过 Wings 使用本地存储时，备份的目的地是在 Wings 的 <code>config.yml</code> 中设置的，设置内容如下。</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">system</span><span class="token punctuation">:</span>
  <span class="token key atrule">backup_directory</span><span class="token punctuation">:</span> /path/to/backup/storage
</code></pre></div><h3 id="使用-s3-备份"><a href="#使用-s3-备份" class="header-anchor">#</a> 使用 S3 备份</h3> <p>AWS S3（或兼容的存储）可以用来存储远程或基于云的备份。必须在 <code>.env</code> 文件中设置以下配置选项或作为环境变量，以便启用它。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 将你的面板设置为使用 s3 进行备份</span>
<span class="token assign-left variable">APP_BACKUP_DRIVER</span><span class="token operator">=</span>s3

<span class="token comment"># 实际使用 s3 的信息</span>
<span class="token assign-left variable">AWS_DEFAULT_REGION</span><span class="token operator">=</span>
<span class="token assign-left variable">AWS_ACCESS_KEY_ID</span><span class="token operator">=</span>
<span class="token assign-left variable">AWS_SECRET_ACCESS_KEY</span><span class="token operator">=</span>
<span class="token assign-left variable">AWS_BACKUPS_BUCKET</span><span class="token operator">=</span>
<span class="token assign-left variable">AWS_ENDPOINT</span><span class="token operator">=</span>
</code></pre></div><p>对于某些配置，你可能需要将你的 S3 URL 从 <code>bucket.domain.com</code> 改为 <code>domain.com/bucket</code>。为了达到这个目的，在你的 <code>.env</code> 文件中添加 <code>AWS_USE_PATH_STYLE_ENDPOINT=true</code>。</p> <h2 id="反向代理设置"><a href="#反向代理设置" class="header-anchor">#</a> 反向代理设置</h2> <p>在反向代理后面运行 Pterodactyl 时，例如 <a href="https://support.cloudflare.com/hc/en-us/articles/200170416-What-do-the-SSL-options-mean-" target="_blank" rel="noopener noreferrer">Cloudflare 的灵活 SSL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或 Nginx/Apache/Caddy 等，您将需要对面板进行快速修改，以确保一切按预期继续工作。
默认情况下，当使用这些反向代理时，您的面板将无法正确处理请求。
您很可能无法登录或在浏览器控制台中看到安全警告，因为它试图加载不安全的资源。
这是因为面板用来确定如何生成链接的内部逻辑认为它是通过 HTTP 而不是通过 HTTPS 运行的。</p> <p>您需要编辑面板根目录中的 <code>.env</code> 文件以至少包含 <code>TRUSTED_PROXIES=*</code>。
我们强烈建议提供特定的 IP 地址（或以英文逗号分隔的 IP 列表），而不是允许使用 <code>*</code>。例如，如果您的代理与服务器在同一台机器上运行，那么类似  <code>TRUSTED_PROXIES=127.0.0.1</code> 之类的东西很可能适合您。</p> <h3 id="nginx-特定配置"><a href="#nginx-特定配置" class="header-anchor">#</a> NGINX 特定配置</h3> <p>为了使翼龙正确响应 NGINX 反向代理，NGINX <code>location</code> 配置必须包含以下内容：</p> <div class="language-Nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Real<span class="token operator">-</span>IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
<span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span><span class="token punctuation">;</span>
<span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
<span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>Proto <span class="token variable">$scheme</span><span class="token punctuation">;</span>
<span class="token keyword">proxy_redirect</span> off<span class="token punctuation">;</span>
<span class="token keyword">proxy_buffering</span> off<span class="token punctuation">;</span>
proxy_request_buffering off<span class="token punctuation">;</span>
</code></pre></div><h3 id="cloudflare-特定配置"><a href="#cloudflare-特定配置" class="header-anchor">#</a> Cloudflare 特定配置</h3> <p>如果您使用 Cloudflare 的灵活 SSL，您应该设置 <code>TRUSTED_PROXIES</code> 以包含 <a href="https://www.cloudflare.com/ips/" target="_blank" rel="noopener noreferrer">他们的 IP 地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。以下是如何设置的示例。</p> <div class="language-text extra-class"><pre class="language-text"><code>TRUSTED_PROXIES=173.245.48.0/20,103.21.244.0/22,103.22.200.0/22,103.31.4.0/22,141.101.64.0/18,108.162.192.0/18,190.93.240.0/20,188.114.96.0/20,197.234.240.0/22,198.41.128.0/17,162.158.0.0/15,104.16.0.0/13,104.24.0.0/14,172.64.0.0/13,131.0.72.0/22
</code></pre></div><h2 id="recaptcha"><a href="#recaptcha" class="header-anchor">#</a> reCAPTCHA</h2> <p>面板使用隐形 reCAPTCHA 来保护登录页面免受暴力攻击。如果登录尝试被认为可疑，则可能会要求用户执行 reCAPTCHA 质询。</p> <h3 id="配置-recaptcha"><a href="#配置-recaptcha" class="header-anchor">#</a> 配置 reCAPTCHA</h3> <p>虽然我们默认提供全局 Site Key 和 Secret Key，但我们强烈建议您根据自己的设置更改它。</p> <p>您可以在 <a href="https://www.google.com/recaptcha/admin" target="_blank" rel="noopener noreferrer">reCAPTCHA 管理控制台<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中生成自己的密钥。</p> <p>然后可以使用管理面板中的设置来应用这些密钥。reCAPTCHA 设置可以在<strong>高级</strong>选项卡上找到。</p> <h3 id="禁用-recaptcha"><a href="#禁用-recaptcha" class="header-anchor">#</a> 禁用 reCAPTCHA</h3> <div class="custom-block warning"><p class="custom-block-title">安全警告</p> <p>我们不建议禁用 reCAPTCHA。这是一种安全机制，使对用户帐户执行暴力攻击时变得更加困难。</p></div> <p>如果用户在登录时遇到问题，或者您的面板没有暴露在互联网上，禁用 reCAPTCHA 是有意义的。</p> <p>使用管理面板可以轻松禁用 reCAPTCHA。在设置中，选择<strong>高级</strong>选项卡并将 reCAPTCHA 的<strong>状态</strong>设置为<strong>禁用</strong>。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果您无法访问面板，导致改不了这部分的设置，你也可以在翼龙面板的根目录下的 <code>.env</code> 文件中，设置环境变量中去禁用 reCAPTCHA。</p> <div class="language- extra-class"><pre class="language-text"><code>RECAPTCHA_ENABLED=false
</code></pre></div></div> <h4 id="编辑你的数据库"><a href="#编辑你的数据库" class="header-anchor">#</a> 编辑你的数据库</h4> <p>如果您无法访问面板，可以使用以下命令直接修改数据库。</p> <div class="language-sql extra-class"><pre class="language-sql"><code>mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p
<span class="token keyword">UPDATE</span> panel<span class="token punctuation">.</span>settings <span class="token keyword">SET</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token string">'false'</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span><span class="token keyword">key</span><span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'settings::recaptcha:enabled'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="动态口令认证"><a href="#动态口令认证" class="header-anchor">#</a> 动态口令认证</h2> <p>如果可能，您应该使用面板更新您的动态口令认证设置。如果您出于某种原因无法访问您的面板，您可以使用以下步骤。</p> <h3 id="禁用动态口令认证"><a href="#禁用动态口令认证" class="header-anchor">#</a> 禁用动态口令认证</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p
<span class="token keyword">UPDATE</span> panel<span class="token punctuation">.</span>settings <span class="token keyword">SET</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span><span class="token keyword">key</span><span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'settings::pterodactyl:auth:2fa_required'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="为特定用户禁用动态口令认证"><a href="#为特定用户禁用动态口令认证" class="header-anchor">#</a> 为特定用户禁用动态口令认证</h3> <p>在 <code>/var/www/pterodactyl</code> (这里指翼龙所在的目录) 目录中运行以下命令。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan p:user:disable2fa
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/pterodactyl-china/documentation/edit/master/panel/1.0/additional_configuration.md" target="_blank" rel="noopener noreferrer">帮助我们改进此页面。</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></div> <!----> </div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2074c500.js" defer></script><script src="/assets/js/4.6551f5ab.js" defer></script><script src="/assets/js/1.c40e2759.js" defer></script><script src="/assets/js/67.d2fd355f.js" defer></script>
  </body>
</html>
