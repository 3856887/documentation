<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>其他配置 | Pterodactyl-China</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#0e4688">
    <link rel="manifest" href="/favicons/site.webmanifest">
    <link rel="shortcut icon" href="/favicons/favicon.ico">
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-KWVNS6PXK2"></script>
    <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KWVNS6PXK2');
        </script>
    <meta name="description" content="翼龙是一个使用 PHP、React 和 Go 构建的开源游戏服务器管理面板。翼龙在设计时考虑了安全性，在隔离的 Docker 镜像中运行所有游戏服务器，同时向最终用户展示了美观直观的 UI。">
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    <meta name="theme-color" content="#0e4688">
    <meta name="keywords" content="翼龙,翼龙面板,翼龙面板汉化,面板汉化,汉化,中文,中文汉化,面板,翼龙汉化,翼龙中国,翼手龙,汉化版,pterodactyl-china,china,pterodactyl,教程,翼龙最新版,翼龙官网,翼龙中国官网,官网">
    
    <link rel="preload" href="/assets/css/0.styles.b3d0dfa6.css" as="style"><link rel="preload" href="/assets/js/app.29c399fd.js" as="script"><link rel="preload" href="/assets/js/4.35d2471f.js" as="script"><link rel="preload" href="/assets/js/1.c40e2759.js" as="script"><link rel="preload" href="/assets/js/66.69b1750d.js" as="script"><link rel="prefetch" href="/assets/js/10.cdd4a61d.js"><link rel="prefetch" href="/assets/js/11.283e44b4.js"><link rel="prefetch" href="/assets/js/12.c36cd281.js"><link rel="prefetch" href="/assets/js/13.398e32c9.js"><link rel="prefetch" href="/assets/js/14.89240601.js"><link rel="prefetch" href="/assets/js/15.886ee232.js"><link rel="prefetch" href="/assets/js/16.0f854349.js"><link rel="prefetch" href="/assets/js/17.c4a3a47e.js"><link rel="prefetch" href="/assets/js/18.5b882098.js"><link rel="prefetch" href="/assets/js/19.6745f1bd.js"><link rel="prefetch" href="/assets/js/2.1c4292ed.js"><link rel="prefetch" href="/assets/js/20.e17c3213.js"><link rel="prefetch" href="/assets/js/21.049faedd.js"><link rel="prefetch" href="/assets/js/22.c4019a61.js"><link rel="prefetch" href="/assets/js/23.0c8d5507.js"><link rel="prefetch" href="/assets/js/24.8e5d51e5.js"><link rel="prefetch" href="/assets/js/25.4ffa29c9.js"><link rel="prefetch" href="/assets/js/26.4bacbf8e.js"><link rel="prefetch" href="/assets/js/27.691f8514.js"><link rel="prefetch" href="/assets/js/28.82f3dcaf.js"><link rel="prefetch" href="/assets/js/29.5957e555.js"><link rel="prefetch" href="/assets/js/30.d02b665a.js"><link rel="prefetch" href="/assets/js/31.c3ea05c4.js"><link rel="prefetch" href="/assets/js/32.163a20cb.js"><link rel="prefetch" href="/assets/js/33.eb78adde.js"><link rel="prefetch" href="/assets/js/34.c982b1fd.js"><link rel="prefetch" href="/assets/js/35.fb5c14d0.js"><link rel="prefetch" href="/assets/js/36.75781918.js"><link rel="prefetch" href="/assets/js/37.12f871cd.js"><link rel="prefetch" href="/assets/js/38.8f10c812.js"><link rel="prefetch" href="/assets/js/39.c09a4a1d.js"><link rel="prefetch" href="/assets/js/40.bd587b22.js"><link rel="prefetch" href="/assets/js/41.4d484344.js"><link rel="prefetch" href="/assets/js/42.c8821eaf.js"><link rel="prefetch" href="/assets/js/43.b35ab0c3.js"><link rel="prefetch" href="/assets/js/44.86e03bcf.js"><link rel="prefetch" href="/assets/js/45.b30017d5.js"><link rel="prefetch" href="/assets/js/46.3921dc67.js"><link rel="prefetch" href="/assets/js/47.3b201087.js"><link rel="prefetch" href="/assets/js/48.09af47c9.js"><link rel="prefetch" href="/assets/js/49.9fc6f116.js"><link rel="prefetch" href="/assets/js/5.808a266f.js"><link rel="prefetch" href="/assets/js/50.97dc238c.js"><link rel="prefetch" href="/assets/js/51.8f120aea.js"><link rel="prefetch" href="/assets/js/52.99228419.js"><link rel="prefetch" href="/assets/js/53.e5cf98c2.js"><link rel="prefetch" href="/assets/js/54.3590d92e.js"><link rel="prefetch" href="/assets/js/55.07ad4bbb.js"><link rel="prefetch" href="/assets/js/56.123eb4cf.js"><link rel="prefetch" href="/assets/js/57.d31ed450.js"><link rel="prefetch" href="/assets/js/58.a68cb3fb.js"><link rel="prefetch" href="/assets/js/59.9f92de0b.js"><link rel="prefetch" href="/assets/js/6.4297e35e.js"><link rel="prefetch" href="/assets/js/60.c6c1a1bb.js"><link rel="prefetch" href="/assets/js/61.569760a9.js"><link rel="prefetch" href="/assets/js/62.1238ca96.js"><link rel="prefetch" href="/assets/js/63.ba90503f.js"><link rel="prefetch" href="/assets/js/64.2b804cde.js"><link rel="prefetch" href="/assets/js/65.a8216282.js"><link rel="prefetch" href="/assets/js/67.eba78dea.js"><link rel="prefetch" href="/assets/js/68.281c3a31.js"><link rel="prefetch" href="/assets/js/69.9eb332ca.js"><link rel="prefetch" href="/assets/js/7.396b95f8.js"><link rel="prefetch" href="/assets/js/70.ab12d200.js"><link rel="prefetch" href="/assets/js/71.970ce2b8.js"><link rel="prefetch" href="/assets/js/72.00e5ec0f.js"><link rel="prefetch" href="/assets/js/73.119abf3b.js"><link rel="prefetch" href="/assets/js/74.a323b5cb.js"><link rel="prefetch" href="/assets/js/75.d3f690f2.js"><link rel="prefetch" href="/assets/js/76.a54c7853.js"><link rel="prefetch" href="/assets/js/77.5d8fd610.js"><link rel="prefetch" href="/assets/js/78.d1536bfd.js"><link rel="prefetch" href="/assets/js/79.798a5f94.js"><link rel="prefetch" href="/assets/js/8.2969e390.js"><link rel="prefetch" href="/assets/js/9.49432b78.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b3d0dfa6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="fixed h-12 w-full z-50 top-0"><div class="h-12 w-full bg-black flex items-center justify-center px-4"><p class="text-grey-lightest font-semibold">
        欢迎支持 翼龙中国 CN 
        <a href="https://github.com/pterodactyl-china/documentation" target="_blank" rel="noindex nofollow noopener" class="text-blue-lighter">现在就支持</a></p></div></div> <div class="theme-container mt-12"><header class="nav"><div class="sidebar-button block md:hidden flex-no-shrink"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <div class="logo-container"><a href="/" class="home-link router-link-active"><img src="/logos/pterry.svg" class="logo"> <span class="site-name hidden md:inline can-hide">Pterodactyl-China</span></a></div> <div class="w-full"><div class="flex"><div class="search-box"><input aria-label="搜索" placeholder="搜索" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links flex-no-shrink hidden md:flex"><div class="nav-item"><a href="/project/introduction.html" class="nav-link">文档
</a></div><div class="nav-item"><a href="/community/about.html" class="nav-link">社区指南
</a></div><div class="nav-item"><a href="https://bbs.pterodactyl.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
    获取帮助
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://dashflo.net/docs/api/pterodactyl/v1/" target="_blank" rel="noopener noreferrer" class="nav-link external">
    API
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <div class="nav-item"><a href="https://github.com/pterodactyl-china/panel" target="_blank" rel="noopener noreferrer" class="nav-link">
            GitHub
            <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links flex-no-shrink block md:hidden"><div class="nav-item"><a href="/project/introduction.html" class="nav-link">文档
</a></div><div class="nav-item"><a href="/community/about.html" class="nav-link">社区指南
</a></div><div class="nav-item"><a href="https://bbs.pterodactyl.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
    获取帮助
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://dashflo.net/docs/api/pterodactyl/v1/" target="_blank" rel="noopener noreferrer" class="nav-link external">
    API
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <div class="nav-item"><a href="https://github.com/pterodactyl-china/panel" target="_blank" rel="noopener noreferrer" class="nav-link">
            GitHub
            <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>项目信息</span> <!----> <!----></p> <ul class="sidebar-group-items"><li><a href="/project/introduction.html" class="sidebar-link">介绍</a></li><li><a href="/project/about.html" class="sidebar-link">关于</a></li><li><a href="/project/terms.html" class="sidebar-link">术语</a></li><li><a href="/project/community.html" class="sidebar-link">Community Standards</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>面板 (前端)</span> <!----> <div tabindex="0" class="version-select custom-select float-right"><div class="selected"><div class="inline-block">
  1.11
  <span class="rounded-full ml-2 text-green-dark">current</span></div> <span class="arrow"></span></div> <div class="items hidden"><div class="item"><div class="inline-block">
  1.11
  <span class="rounded-full ml-2 text-green-dark">current</span></div></div></div></div></p> <ul class="sidebar-group-items"><li><a href="/panel/1.0/getting_started.html" class="sidebar-link">开始入门</a></li><li><a href="/panel/1.0/btpanel_getstarted.html" class="sidebar-link">使用宝塔（BT-Panel）面板搭建</a></li><li><a href="/panel/1.0/docker_getstarted.html" class="sidebar-link">使用 Docker 搭建</a></li><li><a href="/panel/1.0/webserver_configuration.html" class="sidebar-link">网络服务器配置</a></li><li><a href="/panel/1.0/additional_configuration.html" aria-current="page" class="active sidebar-link">其他配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/panel/1.0/additional_configuration.html#备份" class="sidebar-link">备份</a></li><li class="sidebar-sub-header"><a href="/panel/1.0/additional_configuration.html#反向代理设置" class="sidebar-link">反向代理设置</a></li><li class="sidebar-sub-header"><a href="/panel/1.0/additional_configuration.html#recaptcha" class="sidebar-link">reCAPTCHA</a></li><li class="sidebar-sub-header"><a href="/panel/1.0/additional_configuration.html#动态口令认证" class="sidebar-link">动态口令认证</a></li><li class="sidebar-sub-header"><a href="/panel/1.0/additional_configuration.html#遥测" class="sidebar-link">遥测</a></li></ul></li><li><a href="/panel/1.0/updating.html" class="sidebar-link">更新面板</a></li><li><a href="/panel/1.0/troubleshooting.html" class="sidebar-link">疑难解答</a></li><li><a href="/panel/1.0/legacy_upgrade.html" class="sidebar-link">旧版升级</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Wings (后端)</span> <!----> <div tabindex="0" class="version-select custom-select float-right"><div class="selected"><div class="inline-block">
  1.11
  <span class="rounded-full ml-2 text-green-dark">current</span></div> <span class="arrow"></span></div> <div class="items hidden"><div class="item"><div class="inline-block">
  1.11
  <span class="rounded-full ml-2 text-green-dark">current</span></div></div></div></div></p> <ul class="sidebar-group-items"><li><a href="/wings/1.0/installing.html" class="sidebar-link">安装 Wings</a></li><li><a href="/wings/1.0/upgrading.html" class="sidebar-link">升级 Wings</a></li><li><a href="/wings/1.0/migrating.html" class="sidebar-link">迁移至 Wings</a></li><li><a href="/wings/1.0/configuration.html" class="sidebar-link">额外配置</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>教程</span> <!----> <!----></p> <ul class="sidebar-group-items"><li><a href="/tutorials/mysql_setup.html" class="sidebar-link">配置 MySQL</a></li><li><a href="/tutorials/creating_ssl_certificates.html" class="sidebar-link">创建 SSL 证书</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>指南</span> <!----> <!----></p> <ul class="sidebar-group-items"><li><a href="/guides/mounts.html" class="sidebar-link">使用挂载</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content content__default"><h1 id="其他配置"><a href="#其他配置" class="header-anchor">#</a> 其他配置</h1> <p></p><div class="table-of-contents"><ul><li><a href="#备份">备份</a><ul><li><a href="#使用本地备份">使用本地备份</a></li><li><a href="#使用-s3-备份">使用 S3 备份</a></li></ul></li><li><a href="#反向代理设置">反向代理设置</a><ul><li><a href="#nginx-特定配置">NGINX 特定配置</a></li><li><a href="#cloudflare-特定配置">Cloudflare 特定配置</a></li></ul></li><li><a href="#recaptcha">reCAPTCHA</a><ul><li><a href="#配置-recaptcha">配置 reCAPTCHA</a></li><li><a href="#禁用-recaptcha">禁用 reCAPTCHA</a></li></ul></li><li><a href="#动态口令认证">动态口令认证</a><ul><li><a href="#禁用动态口令认证">禁用动态口令认证</a></li><li><a href="#为特定用户禁用动态口令认证">为特定用户禁用动态口令认证</a></li></ul></li><li><a href="#遥测">遥测</a><ul><li><a href="#它是如何工作的">它是如何工作的？</a></li><li><a href="#收集什么数据">收集什么数据？</a></li><li><a href="#数据是如何存储的">数据是如何存储的？</a></li><li><a href="#为什么">为什么？</a></li><li><a href="#启用遥测">启用遥测</a></li><li><a href="#禁用遥测">禁用遥测</a></li></ul></li></ul></div><p></p> <h2 id="备份"><a href="#备份" class="header-anchor">#</a> 备份</h2> <p>翼龙面板允许用户为其服务器创建备份。为了创建备份，必须配置一个备份存储方法。</p> <p>当改变翼龙面板的备份存储方式时，用户仍然可以从以前的存储驱动下载或删除现有的备份。
在从S3迁移到本地备份的例子中，切换到本地备份存储方式后，S3凭证必须保持配置。</p> <h3 id="使用本地备份"><a href="#使用本地备份" class="header-anchor">#</a> 使用本地备份</h3> <p>默认情况下，翼龙面板通过 Wings (后端) 使用本地存储进行备份。也就是说，这种备份存储方式可以在 <code>.env</code> 文件中通过以下配置明确设置。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 将你的面板设置为通过 Wings 使用本地存储进行备份</span>
<span class="token assign-left variable">APP_BACKUP_DRIVER</span><span class="token operator">=</span>wings
</code></pre></div><p>请注意，当通过 Wings 使用本地存储时，备份的目的地是在 Wings 的 <code>config.yml</code> 中设置的，设置内容如下。</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">system</span><span class="token punctuation">:</span>
  <span class="token key atrule">backup_directory</span><span class="token punctuation">:</span> /path/to/backup/storage
</code></pre></div><h3 id="使用-s3-备份"><a href="#使用-s3-备份" class="header-anchor">#</a> 使用 S3 备份</h3> <p>AWS S3（或兼容的存储）可以用来存储远程或基于云的备份。必须在 <code>.env</code> 文件中设置以下配置选项或作为环境变量，以便启用它。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 将你的面板设置为使用 s3 进行备份</span>
<span class="token assign-left variable">APP_BACKUP_DRIVER</span><span class="token operator">=</span>s3

<span class="token comment"># 实际使用 s3 的信息</span>
<span class="token assign-left variable">AWS_DEFAULT_REGION</span><span class="token operator">=</span>
<span class="token assign-left variable">AWS_ACCESS_KEY_ID</span><span class="token operator">=</span>
<span class="token assign-left variable">AWS_SECRET_ACCESS_KEY</span><span class="token operator">=</span>
<span class="token assign-left variable">AWS_BACKUPS_BUCKET</span><span class="token operator">=</span>
<span class="token assign-left variable">AWS_ENDPOINT</span><span class="token operator">=</span>
</code></pre></div><p>对于某些配置，你可能需要将你的 S3 URL 从 <code>bucket.domain.com</code> 改为 <code>domain.com/bucket</code>。为了达到这个目的，在你的 <code>.env</code> 文件中添加 <code>AWS_USE_PATH_STYLE_ENDPOINT=true</code>。</p> <h4 id="分段上传"><a href="#分段上传" class="header-anchor">#</a> 分段上传</h4> <p>S3 备份使用 S3 分段上传功能。在极少数情况下，您可能需要调整单个分段大小或生成的预签名 URL 的生命周期。</p> <p>默认分段大小为 5GB，默认预签名 URL 生命周期为 60 分钟。您可以使用 <code>BACKUP_MAX_PART_SIZE</code> 环境变量配置最大分段尺寸。
您必须以字节为单位指定大小。 要定义预签名 URL 的生命周期，请使用 <code>BACKUP_PRESIGNED_URL_LIFESPAN</code> 变量。预期单位是分钟。</p> <p>以下 <code>.env</code> 片段配置 1GB 部分并使用 120 分钟作为预签名 URL 生命周期：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">BACKUP_MAX_PART_SIZE</span><span class="token operator">=</span><span class="token number">1073741824</span>
<span class="token assign-left variable">BACKUP_PRESIGNED_URL_LIFESPAN</span><span class="token operator">=</span><span class="token number">120</span>
</code></pre></div><h4 id="存储类"><a href="#存储类" class="header-anchor">#</a> 存储类</h4> <p>如果您需要指定存储类，请使用 <code>AWS_BACKUPS_STORAGE_CLASS</code> 环境变量。默认选项是 <code>STANDARD</code>（S3 标准）。</p> <p>以下 <code>.env</code> 片段将类设置为 <code>STANDARD_IA</code>（这是一个示例）。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># STANDARD_IA 就是一个例子。</span>
<span class="token assign-left variable">AWS_BACKUPS_STORAGE_CLASS</span><span class="token operator">=</span>STANDARD_IA
</code></pre></div><h2 id="反向代理设置"><a href="#反向代理设置" class="header-anchor">#</a> 反向代理设置</h2> <p>在反向代理后面运行 Pterodactyl 时，例如 <a href="https://support.cloudflare.com/hc/en-us/articles/200170416-What-do-the-SSL-options-mean-" target="_blank" rel="noopener noreferrer">Cloudflare 的灵活 SSL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或 Nginx/Apache/Caddy 等，您将需要对面板进行快速修改，以确保一切按预期继续工作。
默认情况下，当使用这些反向代理时，您的面板将无法正确处理请求。
您很可能无法登录或在浏览器控制台中看到安全警告，因为它试图加载不安全的资源。
这是因为面板用来确定如何生成链接的内部逻辑认为它是通过 HTTP 而不是通过 HTTPS 运行的。</p> <p>您需要编辑面板根目录中的 <code>.env</code> 文件以至少包含 <code>TRUSTED_PROXIES=*</code>。
我们强烈建议提供特定的 IP 地址（或以英文逗号分隔的 IP 列表），而不是允许使用 <code>*</code>。例如，如果您的代理与服务器在同一台机器上运行，那么类似  <code>TRUSTED_PROXIES=127.0.0.1</code> 之类的东西很可能适合您。</p> <h3 id="nginx-特定配置"><a href="#nginx-特定配置" class="header-anchor">#</a> NGINX 特定配置</h3> <p>为了使翼龙正确响应 NGINX 反向代理，NGINX <code>location</code> 配置必须包含以下内容：</p> <div class="language-Nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Real<span class="token operator">-</span>IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
<span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span><span class="token punctuation">;</span>
<span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
<span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>Proto <span class="token variable">$scheme</span><span class="token punctuation">;</span>
<span class="token keyword">proxy_redirect</span> off<span class="token punctuation">;</span>
<span class="token keyword">proxy_buffering</span> off<span class="token punctuation">;</span>
proxy_request_buffering off<span class="token punctuation">;</span>
</code></pre></div><h3 id="cloudflare-特定配置"><a href="#cloudflare-特定配置" class="header-anchor">#</a> Cloudflare 特定配置</h3> <p>如果您使用 Cloudflare 的灵活 SSL，您应该设置 <code>TRUSTED_PROXIES</code> 以包含 <a href="https://www.cloudflare.com/ips/" target="_blank" rel="noopener noreferrer">他们的 IP 地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。以下是如何设置的示例。</p> <div class="language-text extra-class"><pre class="language-text"><code>TRUSTED_PROXIES=173.245.48.0/20,103.21.244.0/22,103.22.200.0/22,103.31.4.0/22,141.101.64.0/18,108.162.192.0/18,190.93.240.0/20,188.114.96.0/20,197.234.240.0/22,198.41.128.0/17,162.158.0.0/15,104.16.0.0/13,104.24.0.0/14,172.64.0.0/13,131.0.72.0/22
</code></pre></div><h2 id="recaptcha"><a href="#recaptcha" class="header-anchor">#</a> reCAPTCHA</h2> <p>面板使用隐形 reCAPTCHA 来保护登录页面免受暴力攻击。如果登录尝试被认为可疑，则可能会要求用户执行 reCAPTCHA 质询。</p> <h3 id="配置-recaptcha"><a href="#配置-recaptcha" class="header-anchor">#</a> 配置 reCAPTCHA</h3> <p>虽然我们默认提供全局 Site Key 和 Secret Key，但我们强烈建议您根据自己的设置更改它。</p> <p>您可以在 <a href="https://www.google.com/recaptcha/admin" target="_blank" rel="noopener noreferrer">reCAPTCHA 管理控制台<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中生成自己的密钥。</p> <p>然后可以使用管理面板中的设置来应用这些密钥。reCAPTCHA 设置可以在<strong>高级</strong>选项卡上找到。</p> <h3 id="禁用-recaptcha"><a href="#禁用-recaptcha" class="header-anchor">#</a> 禁用 reCAPTCHA</h3> <div class="custom-block warning"><p class="custom-block-title">安全警告</p> <p>我们不建议禁用 reCAPTCHA。这是一种安全机制，使对用户帐户执行暴力攻击时变得更加困难。</p></div> <p>如果用户在登录时遇到问题，或者您的面板没有暴露在互联网上，禁用 reCAPTCHA 是有意义的。</p> <p>使用管理面板可以轻松禁用 reCAPTCHA。在设置中，选择<strong>高级</strong>选项卡并将 reCAPTCHA 的<strong>状态</strong>设置为<strong>禁用</strong>。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果您无法访问面板，导致改不了这部分的设置，你也可以在翼龙面板的根目录下的 <code>.env</code> 文件中，设置环境变量中去禁用 reCAPTCHA。</p> <div class="language- extra-class"><pre class="language-text"><code>RECAPTCHA_ENABLED=false
</code></pre></div></div> <h4 id="编辑你的数据库"><a href="#编辑你的数据库" class="header-anchor">#</a> 编辑你的数据库</h4> <p>如果您无法访问面板，可以使用以下命令直接修改数据库。</p> <div class="language-sql extra-class"><pre class="language-sql"><code>mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p
<span class="token keyword">UPDATE</span> panel<span class="token punctuation">.</span>settings <span class="token keyword">SET</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token string">'false'</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span><span class="token keyword">key</span><span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'settings::recaptcha:enabled'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="动态口令认证"><a href="#动态口令认证" class="header-anchor">#</a> 动态口令认证</h2> <p>如果可能，您应该使用面板更新您的动态口令认证设置。如果您出于某种原因无法访问您的面板，您可以使用以下步骤。</p> <h3 id="禁用动态口令认证"><a href="#禁用动态口令认证" class="header-anchor">#</a> 禁用动态口令认证</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p
<span class="token keyword">UPDATE</span> panel<span class="token punctuation">.</span>settings <span class="token keyword">SET</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span><span class="token keyword">key</span><span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'settings::pterodactyl:auth:2fa_required'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="为特定用户禁用动态口令认证"><a href="#为特定用户禁用动态口令认证" class="header-anchor">#</a> 为特定用户禁用动态口令认证</h3> <p>在 <code>/var/www/pterodactyl</code> (这里指翼龙所在的目录) 目录中运行以下命令。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan p:user:disable2fa
</code></pre></div><h2 id="遥测"><a href="#遥测" class="header-anchor">#</a> 遥测</h2> <p>从 1.11 开始，Panel 收集有关 Panel 和所有连接节点的匿名指标。
此功能默认启用，但可以禁用。</p> <p>此功能收集的数据不会出售或用于广告目的。 出于改进软件的目的，可能会公开或与第三方共享汇总统计数据。</p> <h3 id="它是如何工作的"><a href="#它是如何工作的" class="header-anchor">#</a> 它是如何工作的？</h3> <p>遥测系统首先为 Panel 安装生成随机 UUIDv4 标识符。
此标识符存储在数据库中，因此对多个 Panel 实例进行负载平衡的人仍然可以拥有唯一的标识符。 然后将该标识符连同相关遥测数据发送到远程服务器。 遥测数据每 24 小时收集一次，没有持续收集或本地存储遥测数据，我们在将数据发送到远程服务器之前立即收集数据。</p> <p>目前，所有遥测收集逻辑都由面板上的 <a href="https://github.com/pterodactyl/panel/blob/1.0-develop/app/Services/Telemetry/TelemetryCollectionService.php#L53" target="_blank" rel="noopener noreferrer">TelemetryCollectionService<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 处理。 该服务负责收集发送到远程服务器的所有数据。</p> <h3 id="收集什么数据"><a href="#收集什么数据" class="header-anchor">#</a> 收集什么数据？</h3> <p>如果您希望查看收集到的完整数据，请查看 TelemetryCollectionService（如上链接），或使用 <code>php artisan p:telemetry</code> 命令查看将发送到远程服务器的确切数据。</p> <p>截至 2022-12-01，收集的数据包括：</p> <ul><li>Unique identifier for the Panel</li> <li>Version of the Panel</li> <li>PHP version</li> <li>Backup storage driver (S3, Local, etc.)</li> <li>Cache driver (Redis, Memcached, etc.)</li> <li>Database driver and version (MySQL, MariaDB, PostgreSQL, etc.)</li> <li>Resources
<ul><li>Allocations
<ul><li>Total number</li> <li>Total number of used allocations (assigned to a server)</li></ul></li> <li>Backups
<ul><li>Total number</li> <li>Sum of the total amount of bytes stored by backups</li></ul></li> <li>Eggs
<ul><li>Total number</li> <li>Map of egg UUIDs to the number of servers using that egg</li></ul></li> <li>Locations
<ul><li>Total number</li></ul></li> <li>Mounts
<ul><li>Total number</li></ul></li> <li>Nests
<ul><li>Total number</li> <li>Map of nest UUIDs to the number of servers using eggs in that nest</li></ul></li> <li>Nodes
<ul><li>Total number</li></ul></li> <li>Servers
<ul><li>Total number</li> <li>Number of servers that are suspended</li></ul></li> <li>Users
<ul><li>Total number</li> <li>Number of users that are admins</li></ul></li></ul></li> <li>Nodes
<ul><li>Node UUID</li> <li>Version of Wings on the node</li> <li>Docker
<ul><li>Version</li> <li>Cgroups
<ul><li>Driver</li> <li>Version</li></ul></li> <li>Containers
<ul><li>Total</li> <li>Running</li> <li>Paused</li> <li>Stopped</li></ul></li> <li>Storage
<ul><li>Driver</li> <li>Filesystem</li></ul></li> <li>runc
<ul><li>Version</li></ul></li></ul></li> <li>System
<ul><li>Architecture (<code>amd64</code>, <code>arm64</code>, etc.)</li> <li>CPU Threads</li> <li>Memory Bytes</li> <li>Kernel Version</li> <li>Operating System (Debian, Fedora, RHEL, Ubuntu, etc.)</li> <li>Operating System Type (bsd, linux, windows, etc.)</li></ul></li></ul></li></ul> <h3 id="数据是如何存储的"><a href="#数据是如何存储的" class="header-anchor">#</a> 数据是如何存储的？</h3> <p>目前，数据存储在 Cloudflare 中，关于所用格式和产品的具体细节目前尚不可用，因为我们的实施仍处于 alpha 阶段。 目前，项目团队成员和公众都<strong>没有</strong>查询或查看此信息的方式。 我们希望这种情况在未来会有所改变，但目前我们不对数据公开可用做出任何保证。</p> <h3 id="为什么"><a href="#为什么" class="header-anchor">#</a> 为什么？</h3> <p>收集这些数据的主要原因是帮助我们对该软件的未来做出更好的决策。 随着 1.11 的发布，最低 PHP 版本要求从 7.4 跃升至 8.0，但是，我们希望添加一项需要 PHP 8.1 的功能，这会使版本要求跃升并可能给某些用户带来问题。 通过收集这些数据，我们有望更深入地了解此类变化将如何影响社区，并在未来做出更好的决策。 这对于架构、内核版本和正在使用的操作系统节点等信息尤为重要。 例如，我们想利用仅存在于某些文件系统中的功能，但我们不知道有多少人在使用这些文件系统，因此我们无法确定是否值得为此付出努力。</p> <p>有些数据对决策没有那么有用，但对我们了解仍然有用。
例如，您有没有想过有多少个 Panel 实例？ 所有这些实例运行了多少台服务器？ 有多少用户在使用面板？ 这些用户中有多少是管理员？ 有多少台服务器在使用特定的预设？ 有多少服务器正在使用特定的预设组？
所有这些问题都可以通过我们收集的数据来回答，并且可以帮助我们和社区更好地了解软件的使用方式。</p> <p>如果您对我们收集的数据有任何疑问，请随时在 Discord 上联系我们。
我们的目标是尽可能透明，并且我们希望确保社区理解我们在做什么以及为什么这样做。</p> <h3 id="启用遥测"><a href="#启用遥测" class="header-anchor">#</a> 启用遥测</h3> <p>默认情况下启用遥测，如果您想在禁用它后启用它，请编辑您的 <code>.env</code> 文件并删除 <code>PTERODACTYL_TELEMETRY_ENABLED</code> 行，或将其设置为 <code>true</code>。</p> <div class="language-text extra-class"><pre class="language-text"><code>PTERODACTYL_TELEMETRY_ENABLED=true
</code></pre></div><h3 id="禁用遥测"><a href="#禁用遥测" class="header-anchor">#</a> 禁用遥测</h3> <p>要禁用遥测，请编辑您的 <code>.env</code> 文件并将 <code>PTERODACTYL_TELEMETRY_ENABLED</code> 设置为 <code>false</code>。</p> <div class="language-text extra-class"><pre class="language-text"><code>PTERODACTYL_TELEMETRY_ENABLED=false
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/pterodactyl-china/documentation/edit/master/panel/1.0/additional_configuration.md" target="_blank" rel="noopener noreferrer">帮助我们改进此页面。</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></div> <!----> </div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.29c399fd.js" defer></script><script src="/assets/js/4.35d2471f.js" defer></script><script src="/assets/js/1.c40e2759.js" defer></script><script src="/assets/js/66.69b1750d.js" defer></script>
  </body>
</html>
