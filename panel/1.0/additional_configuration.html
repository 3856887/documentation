<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Additional Configuration | Pterodactyl-China</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/documentation/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/documentation/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/documentation/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="mask-icon" href="/documentation/favicons/safari-pinned-tab.svg" color="#0e4688">
    <link rel="manifest" href="/documentation/favicons/site.webmanifest">
    <link rel="shortcut icon" href="/documentation/favicons/favicon.ico">
    <meta name="description" content="Pterodactyl 是一个使用 PHP、React 和 Go 构建的开源游戏服务器管理面板。Pterodactyl 在设计时考虑了安全性，在隔离的 Docker 镜像中运行所有游戏服务器，同时向最终用户展示了美观直观的 UI。">
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    <meta name="theme-color" content="#0e4688">
    
    <link rel="preload" href="/documentation/assets/css/0.styles.0bc6dd0a.css" as="style"><link rel="preload" href="/documentation/assets/js/app.12039029.js" as="script"><link rel="preload" href="/documentation/assets/js/4.75c0ac28.js" as="script"><link rel="preload" href="/documentation/assets/js/1.1486da35.js" as="script"><link rel="preload" href="/documentation/assets/js/66.385834e9.js" as="script"><link rel="prefetch" href="/documentation/assets/js/10.cdd4a61d.js"><link rel="prefetch" href="/documentation/assets/js/11.810aa47c.js"><link rel="prefetch" href="/documentation/assets/js/12.6757735f.js"><link rel="prefetch" href="/documentation/assets/js/13.bd04c4ec.js"><link rel="prefetch" href="/documentation/assets/js/14.aee093c5.js"><link rel="prefetch" href="/documentation/assets/js/15.ee53563a.js"><link rel="prefetch" href="/documentation/assets/js/16.24317aa9.js"><link rel="prefetch" href="/documentation/assets/js/17.b901cb40.js"><link rel="prefetch" href="/documentation/assets/js/18.fcb158a9.js"><link rel="prefetch" href="/documentation/assets/js/19.aed3dbb3.js"><link rel="prefetch" href="/documentation/assets/js/2.1c4292ed.js"><link rel="prefetch" href="/documentation/assets/js/20.0e86f096.js"><link rel="prefetch" href="/documentation/assets/js/21.73040581.js"><link rel="prefetch" href="/documentation/assets/js/22.a5a33408.js"><link rel="prefetch" href="/documentation/assets/js/23.4be64b52.js"><link rel="prefetch" href="/documentation/assets/js/24.b621630c.js"><link rel="prefetch" href="/documentation/assets/js/25.71c5bc7a.js"><link rel="prefetch" href="/documentation/assets/js/26.199e42e5.js"><link rel="prefetch" href="/documentation/assets/js/27.a111452a.js"><link rel="prefetch" href="/documentation/assets/js/28.b1cca863.js"><link rel="prefetch" href="/documentation/assets/js/29.d8f8baa4.js"><link rel="prefetch" href="/documentation/assets/js/30.7acbd17e.js"><link rel="prefetch" href="/documentation/assets/js/31.311e5754.js"><link rel="prefetch" href="/documentation/assets/js/32.cc4a61a6.js"><link rel="prefetch" href="/documentation/assets/js/33.fbb55ac6.js"><link rel="prefetch" href="/documentation/assets/js/34.e05ad180.js"><link rel="prefetch" href="/documentation/assets/js/35.d0599a54.js"><link rel="prefetch" href="/documentation/assets/js/36.749bfc76.js"><link rel="prefetch" href="/documentation/assets/js/37.e3a8a0f7.js"><link rel="prefetch" href="/documentation/assets/js/38.b4718b04.js"><link rel="prefetch" href="/documentation/assets/js/39.ccb9a5f4.js"><link rel="prefetch" href="/documentation/assets/js/40.066c5a5a.js"><link rel="prefetch" href="/documentation/assets/js/41.2a070ddc.js"><link rel="prefetch" href="/documentation/assets/js/42.37d38e22.js"><link rel="prefetch" href="/documentation/assets/js/43.2fedfea4.js"><link rel="prefetch" href="/documentation/assets/js/44.4c29c152.js"><link rel="prefetch" href="/documentation/assets/js/45.1860d74a.js"><link rel="prefetch" href="/documentation/assets/js/46.ef1b83e5.js"><link rel="prefetch" href="/documentation/assets/js/47.6219675f.js"><link rel="prefetch" href="/documentation/assets/js/48.48c255b5.js"><link rel="prefetch" href="/documentation/assets/js/49.84793e89.js"><link rel="prefetch" href="/documentation/assets/js/5.9d44908f.js"><link rel="prefetch" href="/documentation/assets/js/50.49479a79.js"><link rel="prefetch" href="/documentation/assets/js/51.2a10b7cd.js"><link rel="prefetch" href="/documentation/assets/js/52.dbdbb072.js"><link rel="prefetch" href="/documentation/assets/js/53.15bd90fc.js"><link rel="prefetch" href="/documentation/assets/js/54.0cf4b436.js"><link rel="prefetch" href="/documentation/assets/js/55.becfc8cb.js"><link rel="prefetch" href="/documentation/assets/js/56.8c78e37e.js"><link rel="prefetch" href="/documentation/assets/js/57.e3e9e7e7.js"><link rel="prefetch" href="/documentation/assets/js/58.7bbeda63.js"><link rel="prefetch" href="/documentation/assets/js/59.30e6ec40.js"><link rel="prefetch" href="/documentation/assets/js/6.92501184.js"><link rel="prefetch" href="/documentation/assets/js/60.9e450b23.js"><link rel="prefetch" href="/documentation/assets/js/61.1d55d614.js"><link rel="prefetch" href="/documentation/assets/js/62.4e56faa3.js"><link rel="prefetch" href="/documentation/assets/js/63.765b2af9.js"><link rel="prefetch" href="/documentation/assets/js/64.05882697.js"><link rel="prefetch" href="/documentation/assets/js/65.900033a9.js"><link rel="prefetch" href="/documentation/assets/js/67.cf8d57fb.js"><link rel="prefetch" href="/documentation/assets/js/68.7c319047.js"><link rel="prefetch" href="/documentation/assets/js/69.deaacdbd.js"><link rel="prefetch" href="/documentation/assets/js/7.c41300e2.js"><link rel="prefetch" href="/documentation/assets/js/70.c3eed7d2.js"><link rel="prefetch" href="/documentation/assets/js/71.e3a2949e.js"><link rel="prefetch" href="/documentation/assets/js/72.fb7500ff.js"><link rel="prefetch" href="/documentation/assets/js/73.f1983357.js"><link rel="prefetch" href="/documentation/assets/js/74.839ee939.js"><link rel="prefetch" href="/documentation/assets/js/75.f3c44ece.js"><link rel="prefetch" href="/documentation/assets/js/76.49d64e6d.js"><link rel="prefetch" href="/documentation/assets/js/77.19096eac.js"><link rel="prefetch" href="/documentation/assets/js/78.e0e78e27.js"><link rel="prefetch" href="/documentation/assets/js/8.d0b0a0c5.js"><link rel="prefetch" href="/documentation/assets/js/9.cc6bde24.js">
    <link rel="stylesheet" href="/documentation/assets/css/0.styles.0bc6dd0a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="fixed h-12 w-full z-50 top-0"><div class="h-12 w-full bg-black flex items-center justify-center px-4"><p class="text-grey-lightest font-semibold">
        Stand with Ukraine 🇺🇦 
        <a href="https://www.savethechildren.org/us/where-we-work/ukraine" target="_blank" rel="noindex nofollow noopener" class="text-blue-lighter">Donate</a> <a href="https://razomforukraine.org/" target="_blank" rel="noindex nofollow noopener" class="text-blue-lighter">Today.</a></p></div></div> <div class="theme-container mt-12"><header class="nav"><div class="sidebar-button block md:hidden flex-no-shrink"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <div class="logo-container"><a href="/documentation/" class="home-link router-link-active"><img src="/documentation/logos/pterry.svg" class="logo"> <span class="site-name hidden md:inline can-hide">Pterodactyl-China</span></a></div> <div class="w-full"><div class="flex"><div class="search-box"><input aria-label="Search" placeholder="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links flex-no-shrink hidden md:flex"><div class="nav-item"><a href="/documentation/project/introduction.html" class="nav-link">文档
</a></div><div class="nav-item"><a href="/documentation/community/about.html" class="nav-link">社区指南
</a></div><div class="nav-item"><a href="https://discord.gg/pterodactyl" target="_blank" rel="noopener noreferrer" class="nav-link external">
    获取帮助
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://dashflo.net/docs/api/pterodactyl/v1/" target="_blank" rel="noopener noreferrer" class="nav-link external">
    API
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <div class="nav-item"><a href="https://github.com/pterodactyl-china/panel" target="_blank" rel="noopener noreferrer" class="nav-link">
            GitHub
            <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links flex-no-shrink block md:hidden"><div class="nav-item"><a href="/documentation/project/introduction.html" class="nav-link">文档
</a></div><div class="nav-item"><a href="/documentation/community/about.html" class="nav-link">社区指南
</a></div><div class="nav-item"><a href="https://discord.gg/pterodactyl" target="_blank" rel="noopener noreferrer" class="nav-link external">
    获取帮助
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://dashflo.net/docs/api/pterodactyl/v1/" target="_blank" rel="noopener noreferrer" class="nav-link external">
    API
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <div class="nav-item"><a href="https://github.com/pterodactyl-china/panel" target="_blank" rel="noopener noreferrer" class="nav-link">
            GitHub
            <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>项目信息</span> <!----> <!----></p> <ul class="sidebar-group-items"><li><a href="/documentation/project/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/documentation/project/about.html" class="sidebar-link">About</a></li><li><a href="/documentation/project/terms.html" class="sidebar-link">Terminology</a></li><li><a href="/documentation/project/community.html" class="sidebar-link">Community Standards</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>面板</span> <!----> <div tabindex="0" class="version-select custom-select float-right"><div class="selected"><div class="inline-block">
  1.9
  <span class="rounded-full ml-2 text-green-dark">current</span></div> <span class="arrow"></span></div> <div class="items hidden"><div class="item"><div class="inline-block">
  1.9
  <span class="rounded-full ml-2 text-green-dark">current</span></div></div></div></div></p> <ul class="sidebar-group-items"><li><a href="/documentation/panel/1.0/getting_started.html" class="sidebar-link">开始入门</a></li><li><a href="/documentation/panel/1.0/webserver_configuration.html" class="sidebar-link">Webserver Configuration</a></li><li><a href="/documentation/panel/1.0/additional_configuration.html" aria-current="page" class="active sidebar-link">Additional Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documentation/panel/1.0/additional_configuration.html#backups" class="sidebar-link">Backups</a></li><li class="sidebar-sub-header"><a href="/documentation/panel/1.0/additional_configuration.html#reverse-proxy-setup" class="sidebar-link">Reverse Proxy Setup</a></li><li class="sidebar-sub-header"><a href="/documentation/panel/1.0/additional_configuration.html#recaptcha" class="sidebar-link">reCAPTCHA</a></li><li class="sidebar-sub-header"><a href="/documentation/panel/1.0/additional_configuration.html#_2fa" class="sidebar-link">2FA</a></li></ul></li><li><a href="/documentation/panel/1.0/updating.html" class="sidebar-link">Updating the Panel</a></li><li><a href="/documentation/panel/1.0/troubleshooting.html" class="sidebar-link">Troubleshooting</a></li><li><a href="/documentation/panel/1.0/legacy_upgrade.html" class="sidebar-link">Legacy Upgrades</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Wings</span> <!----> <div tabindex="0" class="version-select custom-select float-right"><div class="selected"><div class="inline-block">
  1.6
  <span class="rounded-full ml-2 text-green-dark">current</span></div> <span class="arrow"></span></div> <div class="items hidden"><div class="item"><div class="inline-block">
  1.6
  <span class="rounded-full ml-2 text-green-dark">current</span></div></div></div></div></p> <ul class="sidebar-group-items"><li><a href="/documentation/wings/1.0/installing.html" class="sidebar-link">Installing Wings</a></li><li><a href="/documentation/wings/1.0/upgrading.html" class="sidebar-link">Upgrading Wings</a></li><li><a href="/documentation/wings/1.0/migrating.html" class="sidebar-link">Migrating to Wings</a></li><li><a href="/documentation/wings/1.0/configuration.html" class="sidebar-link">Additional Configuration</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>教程</span> <!----> <!----></p> <ul class="sidebar-group-items"><li><a href="/documentation/tutorials/mysql_setup.html" class="sidebar-link">Setting up MySQL</a></li><li><a href="/documentation/tutorials/creating_ssl_certificates.html" class="sidebar-link">Creating SSL Certificates</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>指南</span> <!----> <!----></p> <ul class="sidebar-group-items"><li><a href="/documentation/guides/mounts.html" class="sidebar-link">Using Mounts</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>开发与运营</span> <span class="arrow right"></span> <!----></p> <!----></div></li></ul> </div> <div class="page"> <div class="content content__default"><h1 id="additional-configuration"><a href="#additional-configuration" class="header-anchor">#</a> Additional Configuration</h1> <p></p><div class="table-of-contents"><ul><li><a href="#backups">Backups</a><ul><li><a href="#using-local-backups">Using Local Backups</a></li><li><a href="#using-s3-backups">Using S3 Backups</a></li></ul></li><li><a href="#reverse-proxy-setup">Reverse Proxy Setup</a><ul><li><a href="#nginx-specific-configuration">NGINX Specific Configuration</a></li><li><a href="#cloudflare-specific-configuration">Cloudflare Specific Configuration</a></li></ul></li><li><a href="#recaptcha">reCAPTCHA</a><ul><li><a href="#configuring-recaptcha">Configuring reCAPTCHA</a></li><li><a href="#disabling-recaptcha">Disabling reCAPTCHA</a></li></ul></li><li><a href="#_2fa">2FA</a><ul><li><a href="#disable-2fa-requirement">Disable 2FA requirement</a></li><li><a href="#disable-2fa-for-a-specific-user">Disable 2FA for a specific user</a></li></ul></li></ul></div><p></p> <h2 id="backups"><a href="#backups" class="header-anchor">#</a> Backups</h2> <p>Pterodactyl Panel allows users to create backups of their servers. In order to create backups, a backup storage method has to be configured.</p> <p>When changing Pterodactyl Panel's backup storage method, users may still download or delete existing backups from the prior storage driver. In the instance of migrating from S3 to local backups, S3 credentials must remain configured after switching to the local backup storage method.</p> <h3 id="using-local-backups"><a href="#using-local-backups" class="header-anchor">#</a> Using Local Backups</h3> <p>By default, Pterodactyl Panel uses local storage via Wings for backups. That said, this method of backup storage can be explicitly set with the following configuration in the <code>.env</code> file:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Sets your panel to use local storage via Wings for backups</span>
<span class="token assign-left variable">APP_BACKUP_DRIVER</span><span class="token operator">=</span>wings
</code></pre></div><p>Do note that, when using local storage via Wings, the destination for backups is set in Wings' <code>config.yml</code> with the following setting key:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">system</span><span class="token punctuation">:</span>
  <span class="token key atrule">backup_directory</span><span class="token punctuation">:</span> /path/to/backup/storage
</code></pre></div><h3 id="using-s3-backups"><a href="#using-s3-backups" class="header-anchor">#</a> Using S3 Backups</h3> <p>AWS S3 (or compatible storage) can be used to store remote or cloud-based backups. The following configuration options have to be set in the <code>.env</code> file or as environment variables in order to enable it:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Sets your panel to use s3 for backups</span>
<span class="token assign-left variable">APP_BACKUP_DRIVER</span><span class="token operator">=</span>s3

<span class="token comment"># Info to actually use s3</span>
<span class="token assign-left variable">AWS_DEFAULT_REGION</span><span class="token operator">=</span>
<span class="token assign-left variable">AWS_ACCESS_KEY_ID</span><span class="token operator">=</span>
<span class="token assign-left variable">AWS_SECRET_ACCESS_KEY</span><span class="token operator">=</span>
<span class="token assign-left variable">AWS_BACKUPS_BUCKET</span><span class="token operator">=</span>
<span class="token assign-left variable">AWS_ENDPOINT</span><span class="token operator">=</span>
</code></pre></div><p>For some configurations, you might have to change your S3 URL from <code>bucket.domain.com</code> to <code>domain.com/bucket</code>. To accomplish this, add <code>AWS_USE_PATH_STYLE_ENDPOINT=true</code> to your <code>.env</code> file.</p> <h2 id="reverse-proxy-setup"><a href="#reverse-proxy-setup" class="header-anchor">#</a> Reverse Proxy Setup</h2> <p>When running Pterodactyl behind a reverse proxy, such as <a href="https://support.cloudflare.com/hc/en-us/articles/200170416-What-do-the-SSL-options-mean-" target="_blank" rel="noopener noreferrer">Cloudflare's Flexible SSL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
or Nginx/Apache/Caddy, etc., you will need to make a quick modification to the Panel to ensure things continue to work as expected. By default, when using these reverse proxies,
your Panel will not correctly handle requests. You'll most likely be unable to login or see security warnings in your browser console as it attempts to load insecure assets.
This is because the internal logic the Panel uses to determine how links should be generated thinks it is running over HTTP and not over HTTPS.</p> <p>You will need to edit the <code>.env</code> file in the Panel's root directory to contain <code>TRUSTED_PROXIES=*</code> at minimum. We highly suggest providing a specific IP address
(or comma-separated list of IPs) rather than allowing <code>*</code>. For example, if your proxy is running on the same machine as the server,
the chances are that something like <code>TRUSTED_PROXIES=127.0.0.1</code> will work for you.</p> <h3 id="nginx-specific-configuration"><a href="#nginx-specific-configuration" class="header-anchor">#</a> NGINX Specific Configuration</h3> <p>For Pterodactyl to properly respond to an NGINX reverse proxy, the NGINX <code>location</code> config must contain the following lines:</p> <div class="language-Nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Real<span class="token operator">-</span>IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
<span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span><span class="token punctuation">;</span>
<span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
<span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>Proto <span class="token variable">$scheme</span><span class="token punctuation">;</span>
<span class="token keyword">proxy_redirect</span> off<span class="token punctuation">;</span>
<span class="token keyword">proxy_buffering</span> off<span class="token punctuation">;</span>
proxy_request_buffering off<span class="token punctuation">;</span>
</code></pre></div><h3 id="cloudflare-specific-configuration"><a href="#cloudflare-specific-configuration" class="header-anchor">#</a> Cloudflare Specific Configuration</h3> <p>If you're using Cloudflare's Flexible SSL you should set <code>TRUSTED_PROXIES</code> to contain <a href="https://www.cloudflare.com/ips/" target="_blank" rel="noopener noreferrer">their IP addresses<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
Below is an example of how to set this.</p> <div class="language-text extra-class"><pre class="language-text"><code>TRUSTED_PROXIES=173.245.48.0/20,103.21.244.0/22,103.22.200.0/22,103.31.4.0/22,141.101.64.0/18,108.162.192.0/18,190.93.240.0/20,188.114.96.0/20,197.234.240.0/22,198.41.128.0/17,162.158.0.0/15,104.16.0.0/13,104.24.0.0/14,172.64.0.0/13,131.0.72.0/22
</code></pre></div><h2 id="recaptcha"><a href="#recaptcha" class="header-anchor">#</a> reCAPTCHA</h2> <p>The Panel uses invisible reCAPTCHA to secure the login page from brute-force attacks. If the login attempt is considered suspicious, users may be required to perform a reCAPTCHA challenge.</p> <h3 id="configuring-recaptcha"><a href="#configuring-recaptcha" class="header-anchor">#</a> Configuring reCAPTCHA</h3> <p>While we provide a global Site Key and Secret Key by default, we highly recommend changing it for your own setup.</p> <p>You can generate your own keys in the <a href="https://www.google.com/recaptcha/admin" target="_blank" rel="noopener noreferrer">reCAPTCHA Admin Console<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>The keys can then be applied using the Settings in the admin panel. The reCAPTCHA settings can be found on the <strong>Advanced</strong> tab.</p> <h3 id="disabling-recaptcha"><a href="#disabling-recaptcha" class="header-anchor">#</a> Disabling reCAPTCHA</h3> <div class="custom-block warning"><p class="custom-block-title">SECURITY WARNING</p> <p>We do not recommend disabling reCAPTCHA. It is a security mechanism that makes it harder to perform brute-force attacks on user accounts.</p></div> <p>If users have trouble logging in, or your Panel isn't exposed to the internet, it can make sense to disable reCAPTCHA.</p> <p>reCAPTCHA can easily be disabled using the admin panel. In the Settings, select the <strong>Advanced</strong> tab and set the <strong>Status</strong> of reCAPTCHA to <strong>disabled</strong>.</p> <h4 id="editing-your-database"><a href="#editing-your-database" class="header-anchor">#</a> Editing your database</h4> <p>If you cannot access your panel, you can modify the database directly using the following commands.</p> <div class="language-sql extra-class"><pre class="language-sql"><code>mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p
<span class="token keyword">UPDATE</span> panel<span class="token punctuation">.</span>settings <span class="token keyword">SET</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token string">'false'</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span><span class="token keyword">key</span><span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'settings::recaptcha:enabled'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_2fa"><a href="#_2fa" class="header-anchor">#</a> 2FA</h2> <p>If possible you should use the panel to update your 2FA settings. If you can't access your panel for what ever reason you can use the following steps.</p> <h3 id="disable-2fa-requirement"><a href="#disable-2fa-requirement" class="header-anchor">#</a> Disable 2FA requirement</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p
<span class="token keyword">UPDATE</span> panel<span class="token punctuation">.</span>settings <span class="token keyword">SET</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span><span class="token keyword">key</span><span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'settings::pterodactyl:auth:2fa_required'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="disable-2fa-for-a-specific-user"><a href="#disable-2fa-for-a-specific-user" class="header-anchor">#</a> Disable 2FA for a specific user</h3> <p>Run the following command in your <code>/var/www/pterodactyl</code> directory.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan p:user:disable2fa
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/pterodactyl-china/documentation/edit/master/panel/1.0/additional_configuration.md" target="_blank" rel="noopener noreferrer">帮助我们改进此页面。</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></div> <!----> </div></div></div><div class="global-ui"></div></div>
    <script src="/documentation/assets/js/app.12039029.js" defer></script><script src="/documentation/assets/js/4.75c0ac28.js" defer></script><script src="/documentation/assets/js/1.1486da35.js" defer></script><script src="/documentation/assets/js/66.385834e9.js" defer></script>
  </body>
</html>
