import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r,o as d,c,a as e,e as n,d as t,w as i,b as s}from"./app-j9-DKCaG.js";const p={},u=e("h1",{id:"standalone-sftp-server",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#standalone-sftp-server"},[e("span",null,"Standalone SFTP Server")])],-1),h={class:"hint-container caution"},v=e("p",{class:"hint-container-title"},"This Software is Abandoned",-1),m=e("p",null,[n("This documentation is for "),e("strong",null,"abandoned software"),n(" which does not recieve any security updates or support from the community. This documentation has been left accessible for historial reasons.")],-1),b=e("div",{class:"hint-container warning"},[e("p",{class:"hint-container-title"},"注意"),e("p",null,[n("Standalone SFTP support was introduced in "),e("code",null,"Panel@v0.7.11"),n(" and "),e("code",null,"Daemon@v0.6.8"),n(" and will not work with prior versions.")])],-1),g={href:"https://github.com/pterodactyl/sftp-server",target:"_blank",rel:"noopener noreferrer"},f=s(`<p>Because this functionality is new, we&#39;ve decided to make it an opt-in process, rather than an opt-out process. This page will cover how to setup your standalone SFTP server.</p><h2 id="disable-daemon-s-server" tabindex="-1"><a class="header-anchor" href="#disable-daemon-s-server"><span>Disable Daemon&#39;s Server</span></a></h2><p>To disable the Daemon SFTP server, you only need to add <code>sftp.enabled=false</code> to your Daemon&#39;s <code>core.json</code> file.</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;sftp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ...
    <span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">2022</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Once you&#39;ve done that, restarting the Daemon will apply the change and not boot the built-in server.</p><h2 id="run-the-standalone-server" tabindex="-1"><a class="header-anchor" href="#run-the-standalone-server"><span>Run the Standalone Server</span></a></h2><p>To download the standalone server, execute the command below in your Daemon&#39;s base directory (generally <code>/srv/daemon</code>).</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-Lo</span> sftp-server https://github.com/pterodactyl/sftp-server/releases/download/v1.0.5/sftp-server
<span class="token function">chmod</span> +x sftp-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,8),y={href:"https://golang.org",target:"_blank",rel:"noopener noreferrer"},_=e("code",null,"go",-1),S=s(`<h3 id="start-the-server" tabindex="-1"><a class="header-anchor" href="#start-the-server"><span>Start the Server</span></a></h3><p>Finally, start the SFTP server so that you can then use it to access your files.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>./sftp-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),w=e("code",null,"2022",-1),k=e("code",null,"--port",-1),T={href:"https://github.com/pterodactyl/sftp-server/tree/release/v1.0.4#running",target:"_blank",rel:"noopener noreferrer"},x=s(`<h2 id="daemonize-server" tabindex="-1"><a class="header-anchor" href="#daemonize-server"><span>Daemonize Server</span></a></h2><p>Chances are you&#39;ll want to daemonize the SFTP server using something like <code>systemd</code> so that it will run in the background. Place the contents below in a file called <code>pterosftp.service</code> in the <code>/etc/systemd/system</code> directory.</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>[Unit]
Description=Pterodactyl Standalone SFTP Server
After=wings.service

[Service]
User=root
WorkingDirectory=/srv/daemon
LimitNOFILE=4096
PIDFile=/var/run/wings/1.0/sftp.pid
ExecStart=/srv/daemon/sftp-server
Restart=on-failure
StartLimitInterval=600

[Install]
WantedBy=multi-user.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then, run the command below to enable it in systemd and start the SFTP server.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> <span class="token parameter variable">--now</span> pterosftp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="customizing-startup" tabindex="-1"><a class="header-anchor" href="#customizing-startup"><span>Customizing Startup</span></a></h3><p>If you&#39;re trying to pass additional arguments to the server when starting it using SystemD you&#39;ll want to modify the <code>ExecStart</code> line. Something like <code>ExecStart=/srv/daemon/sftp-server --port 2022</code> for example.</p>`,7);function P(F,D){const o=r("RouteLink"),a=r("ExternalLinkIcon");return d(),c("div",null,[u,e("div",h,[v,m,e("p",null,[n("You should be installing and using "),t(o,{to:"/wings/1.0/installing.html"},{default:i(()=>[n("Wings")]),_:1}),n(" in production environments with "),t(o,{to:"/panel/1.0/getting_started.html"},{default:i(()=>[n("Pterodactyl Panel 1.0")]),_:1}),n(".")])]),b,e("p",null,[n("Pterodactyl now ships with the option to use a "),e("a",g,[n("standalone SFTP server"),t(a)]),n(" rather than using the one that was built into the Daemon. This provides better compatibility with SFTP clients, improved transfer speeds, and a more native approach to file handling and server operation.")]),f,e("p",null,[n("Excellent, now you've got the server binary. Because we've written this server using "),e("a",y,[_,t(a)]),n(" there are no additional dependencies you need to install.")]),S,e("p",null,[n("By default, this will start the SFTP server on the old port of "),w,n(". If you want to use a different port it can be specified by passing the "),k,n(" flag. For more advanced usage, please refer to the "),e("a",T,[n("GitHub README"),t(a)]),n(" which includes all of the flags and their default values.")]),x])}const E=l(p,[["render",P],["__file","standalone_sftp.html.vue"]]),C=JSON.parse(`{"path":"/daemon/0.6/standalone_sftp.html","title":"Standalone SFTP Server","lang":"zh-CN","frontmatter":{"description":"Standalone SFTP Server This Software is Abandoned This documentation is for abandoned software which does not recieve any security updates or support from the community. This do...","head":[["meta",{"property":"og:url","content":"https://pterodactyl.top/daemon/0.6/standalone_sftp.html"}],["meta",{"property":"og:site_name","content":"Pterodactyl-China"}],["meta",{"property":"og:title","content":"Standalone SFTP Server"}],["meta",{"property":"og:description","content":"Standalone SFTP Server This Software is Abandoned This documentation is for abandoned software which does not recieve any security updates or support from the community. This do..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-13T14:28:45.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-13T14:28:45.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Standalone SFTP Server\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-13T14:28:45.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Disable Daemon's Server","slug":"disable-daemon-s-server","link":"#disable-daemon-s-server","children":[]},{"level":2,"title":"Run the Standalone Server","slug":"run-the-standalone-server","link":"#run-the-standalone-server","children":[{"level":3,"title":"Start the Server","slug":"start-the-server","link":"#start-the-server","children":[]}]},{"level":2,"title":"Daemonize Server","slug":"daemonize-server","link":"#daemonize-server","children":[{"level":3,"title":"Customizing Startup","slug":"customizing-startup","link":"#customizing-startup","children":[]}]}],"git":{"createdTime":1713018525000,"updatedTime":1713018525000,"contributors":[{"name":"飒爽师叔","email":"43847794+vlssu@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":1.55,"words":464},"filePathRelative":"daemon/0.6/standalone_sftp.md","localizedDate":"2024年4月13日","autoDesc":true}`);export{E as comp,C as data};
